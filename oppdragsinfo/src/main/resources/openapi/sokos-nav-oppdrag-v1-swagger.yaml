openapi: 3.0.3
info:
  version: 1.0.0
  title: sokos-nav-oppdrag
  description: Tjeneste for å presentere og administrere informasjon som benyttes av økonomiportalen
  contact:
    name: PO Utbetaling
    email: okonomi@nav.no
    url: https://nav-it.slack.com/archives/CKZADNFBP
tags:
  - name: oppdragsinfo
    description: Hovedinformasjon om oppdrag tilknyttet person eller foretak
  - name: oppdragsdetaljer
    description: Detaljert informasjon om oppdrag tilknyttet person eller foretak
  - name: oppdragsdetaljertillegg
    description: Tilleggsopplysninger til oppdrag tilknyttet person eller foretak
  - name: oppdragslinje
    description: Linjeinformasjon til oppdrag tilknyttet person eller foretak
paths:
  /api/v1/oppdrag:
    get:
      tags:
        - oppdragsinfo
      summary: Henter oppdragsdata tilknyttet person eller foretak
      description: Oppdragsopplysninger kan begrenses til faggruppekode, fagsystemId og vedtaksdato
      operationId: hentOppdrag
      parameters:
        - name: offnr
          in: header
          description: fnr hvis person, orgnr hvis organisasjon, eller TSS-ident hvis offnr > 80000000000
          required: true
          schema:
            type: string
        - name: faggruppeKode
          in: query
          description: filtrering på faggruppeKode
          required: false
          schema:
            type: string
        - name: fagSystemId
          in: query
          description: filtrering på fagSystemId
          required: false
          schema:
            type: string
        - name: vedtakFom
          in: query
          description: filtrering på fom-dato til vedtak
          required: false
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OppdragsinfoResponse'
        '400':
          description: Ugyldig verdi
        '401':
          description: Ingen tilgang
      security:
        - bearerAuth: []
  /api/v1/oppdrag/{oppdragId}:
    get:
      tags:
        - oppdragsdetaljer
      summary: Henter detaljer om oppdrag tilknyttet person eller foretak
      description: Oppdragsopplysninger hentes basert på oppdragsId
      operationId: hentOppdragsdetaljer
      parameters:
        - name: oppdragId
          in: path
          description: id på oppdraget som det hentes opplysninger på
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OppdragsinfoDetaljerResponse'
        '400':
          description: Ugyldig verdi
        '401':
          description: Ingen tilgang
      security:
        - bearerAuth: []
  /api/v1/oppdragsdetaljer/{oppdragId}:
    get:
      tags:
        - oppdragsdetaljertillegg
      summary: Henter tilleggsdetaljer om oppdrag tilknyttet person eller foretak
      description: Tilleggsopplysninger til oppdrag hentes basert på oppdragsId
      operationId: hentOppdragsTillegg
      parameters:
        - name: oppdragId
          in: path
          description: id på oppdraget som det hentes opplysninger på
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OppdragsinfoTilleggResponse'
        '400':
          description: Ugyldig verdi
        '401':
          description: Ingen tilgang
      security:
        - bearerAuth: []
  /api/v1/oppdrag/{oppdragId}/linje/{linjeId}:
    get:
      tags:
        - oppdragslinje
      summary: Henter informasjon om oppdragslinje tilknyttet person eller foretak
      description: Oppdragslinjeopplysninger til oppdrag hentes basert på oppdragsId og linjeId
      operationId: hentOppdragsLinje
      parameters:
        - name: oppdragId
          in: path
          description: id på oppdraget som det hentes opplysninger på
          required: true
          schema:
            type: string
        - name: linjeId
          in: path
          description: id på linjen til oppdraget som det hentes opplysninger på
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OppdragslinjeResponse'
        '400':
          description: Ugyldig verdi
        '401':
          description: Ingen tilgang
      security:
        - bearerAuth: []
components:
  schemas:
    OppdragsinfoResponse:
      type: object
      properties:
        oppdragsId:
          type: integer
        gjelderNavn:
          type: string
        fagsystemId:
          type: string
        fagomraade:
          $ref: '#/components/schemas/Fagomraade'
        frekvens:
          type: string
        kjorIdag:
          type: string
        stonadId:
          type: string
        datoForfall:
          type: string
          format: date
        gjelderId:
          type: string
        typeBilag:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        oppdragStatusList:
          type: array
          items:
            $ref: '#/components/schemas/OppdragStatus'
    OppdragsinfoDetaljerResponse:
      type: object
      properties:
        oppdragsId:
          type: integer
        gjelderNavn:
          type: string
        fagsystemId:
          type: string
        fagomraade:
          $ref: '#/components/schemas/Fagomraade'
        frekvens:
          type: string
        kjorIdag:
          type: string
        stonadId:
          type: string
        datoForfall:
          type: string
          format: date
        gjelderId:
          type: string
        typeBilag:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        oppdragslinjer:
          type: array
          items:
            $ref: '#/components/schemas/Oppdragslinje'
        oppdragStatusList:
          type: array
          items:
            $ref: '#/components/schemas/OppdragStatus'
        enhetsList:
          type: array
          items:
            $ref: '#/components/schemas/Oppdragsenhet'
        omposteringList:
          type: array
          items:
            $ref: '#/components/schemas/Ompostering'
    OppdragsinfoTilleggResponse:
      type: object
      properties:
        oppdragsId:
          type: integer
        gjelderNavn:
          type: string
        fagsystemId:
          type: string
        fagomraade:
          $ref: '#/components/schemas/Fagomraade'
        frekvens:
          type: string
        kjorIdag:
          type: string
        stonadId:
          type: string
        datoForfall:
          type: string
          format: date
        gjelderId:
          type: string
        typeBilag:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        oppdragslinjer:
          type: array
          items:
            $ref: '#/components/schemas/Oppdragslinje'
        oppdragStatusList:
          type: array
          items:
            $ref: '#/components/schemas/OppdragStatus'
        enhetsList:
          type: array
          items:
            $ref: '#/components/schemas/Oppdragsenhet'
        omposteringList:
          type: array
          items:
            $ref: '#/components/schemas/Ompostering'
        belopGrenseListe:
          type: array
          items:
            $ref: '#/components/schemas/Belopsgrense'
        tekstList:
          type: array
          items:
            $ref: '#/components/schemas/OppdragsTekst'
    OppdragslinjeResponse:
      type: object
      properties:
        oppdragslinjePK:
          $ref: '#/components/schemas/OppdragslinjePK'
        delytelseId:
          type: string
        sats:
          type: number
        typeSats:
          $ref: '#/components/schemas/Satstype'
        kjorIdag:
          type: string
        vedtakFom:
          type: string
        vedtakTom:
          type: string
        attestert:
          type: string
        kodeArbeidsgiver:
          type: string
        vedtaksId:
          type: string
        henvisning:
          type: string
        utbetalesTilId:
          type: string
        klasse:
          $ref: '#/components/schemas/Klasse'
        skyldnerId:
          type: string
        kid:
          type: string
        kravhaverId:
          type: string
        kravhaverFom:
          type: string
        soknadstype:
          type: string
        maksdato:
          type: string
        refunderesOrgnr:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        korreksjoner:
          type: array
          items:
            $ref: '#/components/schemas/Korreksjon'
        kidList:
          type: array
          items:
            $ref: '#/components/schemas/Kid'
        tekster:
          type: array
          items:
            $ref: '#/components/schemas/OppdragsTekst'
        grader:
          type: array
          items:
            $ref: '#/components/schemas/Grad'
        enheter:
          type: array
          items:
            $ref: '#/components/schemas/Linjeenhet'
        skyldnere:
          type: array
          items:
            $ref: '#/components/schemas/Skyldner'
        valutaer:
          type: array
          items:
            $ref: '#/components/schemas/Valuta'
        kravhavere:
          type: array
          items:
            $ref: '#/components/schemas/Kravhaver'
        maksdatoer:
          type: array
          items:
            $ref: '#/components/schemas/Maksdato'
    Fagomraade:
      type: object
      properties:
        kode:
          type: string
        navn:
          type: string
        faggruppe:
          $ref: '#/components/schemas/Faggruppe'
        antAttestanter:
          type: integer
        maksAktiveOppdrag:
          type: integer
        tpsDistribusjon:
          type: string
        sjekkOffId:
          type: string
        anviser:
          type: string
        sjekkMotTPS:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        motregningsgruppe:
          $ref: '#/components/schemas/Motregningsgruppe'
    Faggruppe:
      type: object
      properties:
        kode:
          type: string
        navn:
          type: string
        skatteProsent:
          type: integer
        oppgjorsordning:
          type: string
        antVentedager:
          type: integer
        feilKonto:
          type: string
        justeringsKonto:
          type: string
        kodeDestinasjon:
          type: string
        kodeReskOppdrag:
          type: string
        onlineBeregning:
          type: string
        kodePensjon:
          type: string
        oreavrund:
          type: string
        samordBeregning:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        kodeKlasseMotposteringFeil:
          type: string
        kodeKlasseMotposteringTrekk:
          type: string
        kodeKlasseMotposteringInnkreving:
          type: string
        prioritet:
          type: integer
    Motregningsgruppe:
      type: object
      properties:
        motregngruppeKode:
          type: string
        beskrivelse:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    OppdragStatus:
      type: object
      properties:
        oppdragStatusPK:
          $ref: '#/components/schemas/OppdragStatusPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    OppdragStatusPK:
      properties:
        oppdragsId:
          type: integer
        kode:
          type: string
        lopenr:
          type: integer
    Oppdragsenhet:
      type: object
      properties:
        oppdragsenhetPK:
          $ref: '#/components/schemas/OppdragsenhetPK'
        enhet:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    OppdragsenhetPK:
      properties:
        oppdragsId:
          type: integer
        type:
          type: string
        datoFom:
          type: string
        nokkelId:
          type: integer
    Ompostering:
      properties:
        omposteringPK:
          $ref: '#/components/schemas/OmposteringPK'
        ompostering:
          type: string
        datoOmposterFom:
          type: string
        feilreg:
          type: string
        beregningsId:
          type: integer
        utfort:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    OmposteringPK:
      properties:
        gjelderId:
          type: string
        kodeFaggruppe:
          type: string
        lopenr:
          type: integer
    Belopsgrense:
      properties:
        BelopsgrensePK:
          $ref: '#/components/schemas/BelopsgrensePK'
        belop:
          type: number
          format: double
        datoTom:
          type: string
        feilreg:
          type: string
        belopValue:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    BelopsgrensePK:
      properties:
        oppdragsId:
          type: integer
        nokkelId:
          type: integer
        typeBelopsgrense:
          type: string
        datoFom:
          type: string
    OppdragsTekst:
      properties:
        oppdragstekstPK:
          $ref: '#/components/schemas/OppdragstekstPK'
        tekstkode:
          type: string
        tekst:
          type: string
        datofom:
          type: string
        datotom:
          type: string
        feilreg:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    OppdragstekstPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        tekstLnr:
          type: integer
        nokkelId:
          type: integer
    Oppdragslinje:
      properties:
        oppdragslinjePK:
          $ref: '#/components/schemas/OppdragslinjePK'
        delytelseId:
          type: string
        sats:
          type: number
        typeSats:
          $ref: '#/components/schemas/Satstype'
        kjorIdag:
          type: string
        vedtakFom:
          type: string
        vedtakTom:
          type: string
        attestert:
          type: string
        kodeArbeidsgiver:
          type: string
        vedtaksId:
          type: string
        henvisning:
          type: string
        utbetalesTilId:
          type: string
        klasse:
          $ref: '#/components/schemas/Klasse'
        skyldnerId:
          type: string
        kid:
          type: string
        kravhaverId:
          type: string
        kravhaverFom:
          type: string
        soknadstype:
          type: string
        maksdato:
          type: string
        refunderesOrgnr:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
        korreksjoner:
          type: array
          items:
            $ref: '#/components/schemas/Korreksjon'
        kidList:
          type: array
          items:
            $ref: '#/components/schemas/Kid'
        tekster:
          type: array
          items:
            $ref: '#/components/schemas/OppdragsTekst'
        grader:
          type: array
          items:
            $ref: '#/components/schemas/Grad'
        enheter:
          type: array
          items:
            $ref: '#/components/schemas/Linjeenhet'
        skyldnere:
          type: array
          items:
            $ref: '#/components/schemas/Skyldner'
        valutaer:
          type: array
          items:
            $ref: '#/components/schemas/Valuta'
        kravhavere:
          type: array
          items:
            $ref: '#/components/schemas/Kravhaver'
        maksdatoer:
          type: array
          items:
            $ref: '#/components/schemas/Maksdato'
        attestasjoner:
          type: array
          items:
            $ref: '#/components/schemas/Attest'
        statuser:
          type: array
          items:
            $ref: '#/components/schemas/LinjeStatus'
    OppdragslinjePK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
    Satstype:
      properties:
        kode:
          type: string
        beskrivelse:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    Klasse:
      properties:
        kode:
          type: string
        beskrivelse:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    Korreksjon:
      properties:
        korreksjonPK:
          $ref: '#/components/schemas/KorreksjonPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    KorreksjonPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        oppdragsIdKorr:
          type: integer
        linjeIdKorr:
          type: integer
    Kid:
      properties:
        KidPK:
          $ref: '#/components/schemas/KidPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    KidPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        kid:
          type: string
        datoFom:
          type: string
    Grad:
      properties:
        GradPK:
          $ref: '#/components/schemas/GradPK'
        grad:
          type: integer
        brukerid:
          type: string
        tidspktReg:
          type: string
    GradPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        typeGrad:
          type: string
    Linjeenhet:
      properties:
        linjeenhetPK:
          $ref: '#/components/schemas/LinjeenhetPK'
        enhet:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    LinjeenhetPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        type:
          type: string
        datoFom:
          type: string
        nokkelId:
          type: integer
    Skyldner:
      properties:
        skyldnerPK:
          $ref: '#/components/schemas/SkyldnerPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    SkyldnerPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        skyldnerId:
          type: string
        datoFom:
          type: string
    Valuta:
      properties:
        valutaPK:
          $ref: '#/components/schemas/ValutaPK'
        valuta:
          type: string
        feilreg:
          type: string
        brukerid:
          type: string
        tidspktReg:
          type: string
    ValutaPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        typeValuta:
          type: string
        datoFom:
          type: string
        nokkelId:
          type: integer
    Kravhaver:
      properties:
        kravhaverPK:
          $ref: '#/components/schemas/KravhaverPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    KravhaverPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        kravhaverId:
          type: string
        datoFom:
          type: string
    Maksdato:
      properties:
        maksdatoPK:
          $ref: '#/components/schemas/MaksdatoPK'
        brukerid:
          type: string
        maksdato:
          type: string
        datoFom:
          type: string
    MaksdatoPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        tidspktReg:
          type: string
    Attest:
      properties:
        fjern:
          type: boolean
        attester:
          type: boolean
        utbetales:
          type: boolean
        ugyldigFomDate:
          type: string
    LinjeStatus:
      properties:
        linjeStatusPK:
          $ref: '#/components/schemas/LinjeStatusPK'
        brukerid:
          type: string
        tidspktReg:
          type: string
    LinjeStatusPK:
      properties:
        oppdragsId:
          type: integer
        linjeId:
          type: integer
        kode:
          type: string
        datoFom:
          type: string
        lopenr:
          type: integer
  securitySchemes:
    bearerAuth:            # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT